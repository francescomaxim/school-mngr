<div class="container mt-4">
  <h2 class="text-white mb-4 text-center text-md-start">Manage Users</h2>

  <!-- Tabel scrollabil vertical -->
  <div
    class="table-responsive bg-dark text-white p-3 rounded shadow"
    style="max-height: 400px; overflow-y: auto; overflow-x: auto"
  >
    <table class="table table-dark table-bordered table-hover mb-0">
      <thead class="sticky-top bg-dark">
        <tr>
          <th>Email</th>
          <th>Full Name</th>
          <th>Role</th>
          <th style="min-width: 120px">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users()">
          <td>{{ user.email }}</td>
          <td>{{ user.fullName }}</td>
          <td>{{ user.role }}</td>
          <td class="d-flex flex-wrap gap-2 justify-content-center">
            <button
              class="btn btn-sm btn-warning"
              style="min-width: 80px"
              (click)="onEdit(user)"
            >
              Edit
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Edit Modal -->
  <div
    *ngIf="editingUser"
    class="modal-backdrop d-flex justify-content-center align-items-center px-3"
    style="
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 100vw;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1050;
    "
  >
    <div
      class="bg-dark text-white p-4 rounded shadow w-100"
      style="max-width: 500px"
    >
      <h5 class="mb-3">✏️ Edit User: {{ editingUser.email }}</h5>
      <div class="mb-3">
        <label class="form-label">Full Name</label>
        <input type="text" class="form-control" [(ngModel)]="updatedFullName" />
      </div>
      <div class="mb-3">
        <label class="form-label">Role</label>
        <select class="form-select" [(ngModel)]="updatedRole">
          <option value="student">Student</option>
          <option value="teacher">Teacher</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-warning" (click)="onSaveEdit()">Save</button>
        <button class="btn btn-outline-light" (click)="cancelEdit()">
          Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Butoane sub tabel -->
  <div
    class="mt-3 d-flex flex-wrap justify-content-center justify-content-md-start gap-3"
  >
    <button class="btn btn-outline-light" (click)="exportUsers()">
      Export Users to Excel
    </button>
    <button class="btn btn-outline-light" (click)="exportEmails()">
      Export Emails List
    </button>
    <button class="btn btn-outline-light" (click)="generatePDFReport()">
      Generate Users Report (PDF)
    </button>
  </div>
</div>
